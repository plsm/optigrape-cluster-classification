from __future__ import print_function

import argparse
import matplotlib
import matplotlib.pyplot
import os.path

import classifier.dataset

WAVE_LENGTHS = [655.04,655.23,655.43,655.63,655.83,656.03,656.22,656.42,656.62,656.82,657.02,657.21,657.41,657.61,657.81,658,658.2,658.4,658.6,658.8,658.99,659.19,659.39,659.59,659.78,659.98,660.18,660.38,660.57,660.77,660.97,661.17,661.36,661.56,661.76,661.96,662.15,662.35,662.55,662.75,662.94,663.14,663.34,663.54,663.73,663.93,664.13,664.33,664.52,664.72,664.92,665.11,665.31,665.51,665.71,665.9,666.1,666.3,666.49,666.69,666.89,667.09,667.28,667.48,667.68,667.87,668.07,668.27,668.47,668.66,668.86,669.06,669.25,669.45,669.65,669.84,670.04,670.24,670.43,670.63,670.83,671.03,671.22,671.42,671.62,671.81,672.01,672.21,672.4,672.6,672.8,672.99,673.19,673.39,673.58,673.78,673.98,674.17,674.37,674.56,674.76,674.96,675.15,675.35,675.55,675.74,675.94,676.14,676.33,676.53,676.73,676.92,677.12,677.31,677.51,677.71,677.9,678.1,678.3,678.49,678.69,678.88,679.08,679.28,679.47,679.67,679.87,680.06,680.26,680.45,680.65,680.85,681.04,681.24,681.43,681.63,681.83,682.02,682.22,682.41,682.61,682.81,683,683.2,683.39,683.59,683.79,683.98,684.18,684.37,684.57,684.76,684.96,685.16,685.35,685.55,685.74,685.94,686.13,686.33,686.53,686.72,686.92,687.11,687.31,687.5,687.7,687.89,688.09,688.29,688.48,688.68,688.87,689.07,689.26,689.46,689.65,689.85,690.04,690.24,690.44,690.63,690.83,691.02,691.22,691.41,691.61,691.8,692,692.19,692.39,692.58,692.78,692.97,693.17,693.36,693.56,693.75,693.95,694.14,694.34,694.53,694.73,694.92,695.12,695.31,695.51,695.7,695.9,696.09,696.29,696.48,696.68,696.87,697.07,697.26,697.46,697.65,697.85,698.04,698.24,698.43,698.63,698.82,699.02,699.21,699.4,699.6,699.79,699.99,700.18,700.38,700.57,700.77,700.96,701.16,701.35,701.54,701.74,701.93,702.13,702.32,702.52,702.71,702.91,703.1,703.29,703.49,703.68,703.88,704.07,704.27,704.46,704.65,704.85,705.04,705.24,705.43,705.63,705.82,706.01,706.21,706.4,706.6,706.79,706.98,707.18,707.37,707.57,707.76,707.95,708.15,708.34,708.54,708.73,708.92,709.12,709.31,709.51,709.7,709.89,710.09,710.28,710.47,710.67,710.86,711.06,711.25,711.44,711.64,711.83,712.02,712.22,712.41,712.61,712.8,712.99,713.19,713.38,713.57,713.77,713.96,714.15,714.35,714.54,714.73,714.93,715.12,715.31,715.51,715.7,715.89,716.09,716.28,716.47,716.67,716.86,717.05,717.25,717.44,717.63,717.83,718.02,718.21,718.41,718.6,718.79,718.99,719.18,719.37,719.57,719.76,719.95,720.15,720.34,720.53,720.72,720.92,721.11,721.3,721.5,721.69,721.88,722.07,722.27,722.46,722.65,722.85,723.04,723.23,723.42,723.62,723.81,724,724.2,724.39,724.58,724.77,724.97,725.16,725.35,725.54,725.74,725.93,726.12,726.31,726.51,726.7,726.89,727.08,727.28,727.47,727.66,727.85,728.05,728.24,728.43,728.62,728.82,729.01,729.2,729.39,729.59,729.78,729.97,730.16,730.35,730.55,730.74,730.93,731.12,731.32,731.51,731.7,731.89,732.08,732.28,732.47,732.66,732.85,733.04,733.24,733.43,733.62,733.81,734,734.2,734.39,734.58,734.77,734.96,735.16,735.35,735.54,735.73,735.92,736.11,736.31,736.5,736.69,736.88,737.07,737.26,737.46,737.65,737.84,738.03,738.22,738.41,738.61,738.8,738.99,739.18,739.37,739.56,739.75,739.95,740.14,740.33,740.52,740.71,740.9,741.09,741.29,741.48,741.67,741.86,742.05,742.24,742.43,742.63,742.82,743.01,743.2,743.39,743.58,743.77,743.96,744.15,744.35,744.54,744.73,744.92,745.11,745.3,745.49,745.68,745.87,746.06,746.26,746.45,746.64,746.83,747.02,747.21,747.4,747.59,747.78,747.97,748.16,748.36,748.55,748.74,748.93,749.12,749.31,749.5,749.69,749.88,750.07,750.26,750.45,750.64,750.83,751.02,751.22,751.41,751.6,751.79,751.98,752.17,752.36,752.55,752.74,752.93,753.12,753.31,753.5,753.69,753.88,754.07,754.26,754.45,754.64,754.83,755.02,755.21,755.4,755.59,755.78,755.97,756.16,756.35,756.54,756.73,756.92,757.11,757.3,757.49,757.68,757.87,758.06,758.25,758.44,758.63,758.82,759.01,759.2,759.39,759.58,759.77,759.96,760.15,760.34,760.53,760.72,760.91,761.1,761.29,761.48,761.67,761.86,762.05,762.24,762.43,762.62,762.81,763,763.19,763.38,763.57,763.76,763.95,764.14,764.33,764.52,764.7,764.89,765.08,765.27,765.46,765.65,765.84,766.03,766.22,766.41,766.6,766.79,766.98,767.17,767.36,767.54,767.73,767.92,768.11,768.3,768.49,768.68,768.87,769.06,769.25,769.44,769.62,769.81,770,770.19,770.38,770.57,770.76,770.95,771.14,771.33,771.51,771.7,771.89,772.08,772.27,772.46,772.65,772.84,773.02,773.21,773.4,773.59,773.78,773.97,774.16,774.35,774.53,774.72,774.91,775.1,775.29,775.48,775.67,775.85,776.04,776.23,776.42,776.61,776.8,776.98,777.17,777.36,777.55,777.74,777.93,778.12,778.3,778.49,778.68,778.87,779.06,779.24,779.43,779.62,779.81,780,780.19,780.37,780.56,780.75,780.94,781.13,781.31,781.5,781.69,781.88,782.07,782.25,782.44,782.63,782.82,783.01,783.19,783.38,783.57,783.76,783.95,784.13,784.32,784.51,784.7,784.88,785.07,785.26,785.45,785.64,785.82,786.01,786.2,786.39,786.57,786.76,786.95,787.14,787.32,787.51,787.7,787.89,788.07,788.26,788.45,788.64,788.82,789.01,789.2,789.39,789.57,789.76,789.95,790.14,790.32,790.51,790.7,790.88,791.07,791.26,791.45,791.63,791.82,792.01,792.19,792.38,792.57,792.76,792.94,793.13,793.32,793.5,793.69,793.88,794.07,794.25,794.44,794.63,794.81,795,795.19,795.37,795.56,795.75,795.93,796.12,796.31,796.49,796.68,796.87,797.05,797.24,797.43,797.61,797.8,797.99,798.17,798.36,798.55,798.73,798.92,799.11,799.29,799.48,799.67,799.85,800.04,800.23,800.41,800.6,800.79,800.97,801.16,801.34,801.53,801.72,801.9,802.09,802.28,802.46,802.65,802.84,803.02,803.21,803.39,803.58,803.77,803.95,804.14,804.32,804.51,804.7,804.88,805.07,805.25,805.44,805.63,805.81,806,806.18,806.37,806.56,806.74,806.93,807.11,807.3,807.49,807.67,807.86,808.04,808.23,808.41,808.6,808.79,808.97,809.16,809.34,809.53,809.71,809.9,810.09,810.27,810.46,810.64,810.83,811.01,811.2,811.38,811.57,811.76,811.94,812.13,812.31,812.5,812.68,812.87,813.05,813.24,813.42,813.61,813.79,813.98,814.16,814.35,814.54,814.72,814.91,815.09,815.28,815.46,815.65,815.83,816.02,816.2,816.39,816.57,816.76,816.94,817.13,817.31,817.5,817.68,817.87,818.05,818.24,818.42,818.61,818.79,818.98,819.16,819.34,819.53,819.71,819.9,820.08,820.27,820.45,820.64,820.82,821.01,821.19,821.38,821.56,821.75,821.93,822.11,822.3,822.48,822.67,822.85,823.04,823.22,823.41,823.59,823.78,823.96,824.14,824.33,824.51,824.7,824.88,825.07,825.25,825.43,825.62,825.8,825.99,826.17,826.35,826.54,826.72,826.91,827.09,827.28,827.46,827.64,827.83,828.01,828.2,828.38,828.56,828.75,828.93,829.12,829.3,829.48,829.67,829.85,830.03,830.22,830.4,830.59,830.77,830.95,831.14,831.32,831.51,831.69,831.87,832.06,832.24,832.42,832.61,832.79,832.97,833.16,833.34,833.52,833.71,833.89,834.08,834.26,834.44,834.63,834.81,834.99,835.18,835.36,835.54,835.73,835.91,836.09,836.28,836.46,836.64,836.83,837.01,837.19,837.38,837.56,837.74,837.92,838.11,838.29,838.47,838.66,838.84,839.02,839.21,839.39,839.57,839.76,839.94,840.12,840.3,840.49,840.67,840.85,841.04,841.22,841.4,841.58,841.77,841.95,842.13,842.32,842.5,842.68,842.86,843.05,843.23,843.41,843.59,843.78,843.96,844.14,844.32,844.51,844.69,844.87,845.05,845.24,845.42,845.6,845.78,845.97,846.15,846.33,846.51,846.7,846.88,847.06,847.24,847.43,847.61,847.79,847.97,848.15,848.34,848.52,848.7,848.88,849.07,849.25,849.43,849.61,849.79,849.98,850.16,850.34,850.52,850.7,850.89,851.07,851.25,851.43,851.61,851.8,851.98,852.16,852.34,852.52,852.7,852.89,853.07,853.25,853.43,853.61,853.8,853.98,854.16,854.34,854.52,854.7,854.88,855.07,855.25,855.43,855.61,855.79,855.97,856.16,856.34,856.52,856.7,856.88,857.06,857.24,857.43,857.61,857.79,857.97,858.15,858.33,858.51,858.69,858.88,859.06,859.24,859.42,859.6,859.78,859.96,860.14,860.33,860.51,860.69,860.87,861.05,861.23,861.41,861.59,861.77,861.95,862.14,862.32,862.5,862.68,862.86,863.04,863.22,863.4,863.58,863.76,863.94,864.12,864.31,864.49,864.67,864.85,865.03,865.21,865.39,865.57,865.75,865.93,866.11,866.29,866.47,866.65,866.83,867.01,867.19,867.38,867.56,867.74,867.92,868.1,868.28,868.46,868.64,868.82,869,869.18,869.36,869.54,869.72,869.9,870.08,870.26,870.44,870.62,870.8,870.98,871.16,871.34,871.52,871.7,871.88,872.06,872.24,872.42,872.6,872.78,872.96,873.14,873.32,873.5,873.68,873.86,874.04,874.22,874.4,874.58,874.76,874.94,875.12,875.3,875.48,875.66,875.84,876.02,876.2,876.38,876.56,876.74,876.92,877.09,877.27,877.45,877.63,877.81,877.99,878.17,878.35,878.53,878.71,878.89,879.07,879.25,879.43,879.61,879.79,879.97,880.14,880.32,880.5,880.68,880.86,881.04,881.22,881.4,881.58,881.76,881.94,882.12,882.29,882.47,882.65,882.83,883.01,883.19,883.37,883.55,883.73,883.91,884.08,884.26,884.44,884.62,884.8,884.98,885.16,885.34,885.51,885.69,885.87,886.05,886.23,886.41,886.59,886.77,886.94,887.12,887.3,887.48,887.66,887.84,888.02,888.19,888.37,888.55,888.73,888.91,889.09,889.26,889.44,889.62,889.8,889.98,890.16,890.33,890.51,890.69,890.87,891.05,891.23,891.4,891.58,891.76,891.94,892.12,892.29,892.47,892.65,892.83,893.01,893.18,893.36,893.54,893.72,893.9,894.07,894.25,894.43,894.61,894.79,894.96,895.14,895.32,895.5,895.68,895.85,896.03,896.21,896.39,896.56,896.74,896.92,897.1,897.27,897.45,897.63,897.81,897.98,898.16,898.34,898.52,898.69,898.87,899.05,899.23,899.4,899.58,899.76,899.94,900.11,900.29,900.47,900.65,900.82,901,901.18,901.36,901.53,901.71,901.89,902.06,902.24,902.42,902.6,902.77,902.95,903.13,903.3,903.48,903.66,903.83,904.01,904.19,904.37,904.54,904.72,904.9,905.07,905.25,905.43,905.6,905.78,905.96,906.13,906.31,906.49,906.66,906.84,907.02,907.19,907.37,907.55,907.72,907.9,908.08,908.25,908.43,908.61,908.78,908.96,909.14,909.31,909.49,909.67,909.84,910.02,910.19,910.37,910.55,910.72,910.9,911.08,911.25,911.43,911.61,911.78,911.96,912.13,912.31,912.49,912.66,912.84,913.01,913.19,913.37,913.54,913.72,913.89,914.07,914.25,914.42,914.6,914.77,914.95,915.13,915.3,915.48,915.65,915.83,916.01,916.18,916.36,916.53,916.71,916.88,917.06,917.24,917.41,917.59,917.76,917.94,918.11,918.29,918.47,918.64,918.82,918.99,919.17,919.34,919.52,919.69,919.87,920.04,920.22,920.4,920.57,920.75,920.92,921.1,921.27,921.45,921.62,921.8,921.97,922.15,922.32,922.5,922.67,922.85,923.02,923.2,923.37,923.55,923.72,923.9,924.07,924.25,924.42,924.6,924.77,924.95,925.12,925.3,925.47,925.65,925.82,926,926.17,926.35,926.52,926.7,926.87,927.05,927.22,927.4,927.57,927.74,927.92,928.09,928.27,928.44,928.62,928.79,928.97,929.14,929.32,929.49,929.66,929.84,930.01,930.19,930.36,930.54,930.71,930.89,931.06,931.23,931.41,931.58,931.76,931.93,932.11,932.28,932.45,932.63,932.8,932.98,933.15,933.32,933.5,933.67,933.85,934.02,934.19,934.37,934.54,934.72,934.89,935.06,935.24,935.41,935.59,935.76,935.93,936.11,936.28,936.45,936.63,936.8,936.98,937.15,937.32,937.5,937.67,937.84,938.02,938.19,938.36,938.54,938.71,938.89,939.06,939.23,939.41,939.58,939.75,939.93,940.1,940.27,940.45,940.62,940.79,940.97,941.14,941.31,941.49,941.66,941.83,942.01,942.18,942.35,942.53,942.7,942.87,943.04,943.22,943.39,943.56,943.74,943.91,944.08,944.26,944.43,944.6,944.77,944.95,945.12,945.29,945.47,945.64,945.81,945.98,946.16,946.33,946.5,946.68,946.85,947.02,947.19,947.37,947.54,947.71,947.88,948.06,948.23,948.4,948.57,948.75,948.92,949.09,949.26,949.44,949.61,949.78,949.95,950.13,950.3,950.47,950.64,950.82,950.99,951.16,951.33,951.51,951.68,951.85,952.02,952.19,952.37,952.54,952.71,952.88,953.05,953.23,953.4,953.57,953.74,953.91,954.09,954.26,954.43,954.6,954.77,954.95,955.12,955.29,955.46,955.63,955.81,955.98,956.15,956.32,956.49,956.66,956.84,957.01,957.18,957.35,957.52,957.69,957.87,958.04,958.21,958.38,958.55,958.72,958.89,959.07,959.24,959.41,959.58,959.75,959.92,960.09,960.27,960.44,960.61,960.78,960.95,961.12,961.29,961.46,961.64,961.81,961.98,962.15,962.32,962.49,962.66,962.83,963,963.18,963.35,963.52,963.69,963.86,964.03,964.2,964.37,964.54,964.71,964.88,965.06,965.23,965.4,965.57,965.74,965.91,966.08,966.25,966.42,966.59,966.76,966.93,967.1,967.27,967.44,967.62,967.79,967.96,968.13,968.3,968.47,968.64,968.81,968.98,969.15,969.32,969.49,969.66,969.83,970,970.17,970.34,970.51,970.68,970.85,971.02,971.19,971.36,971.53,971.7,971.87,972.04,972.21,972.38,972.55,972.72,972.89,973.06,973.23,973.4,973.57,973.74,973.91,974.08,974.25,974.42,974.59,974.76,974.93,975.1,975.27,975.44,975.61,975.78,975.95,976.12,976.29,976.46,976.63,976.8,976.97,977.14,977.31,977.48,977.65,977.82,977.99,978.16,978.32,978.49,978.66,978.83,979,979.17,979.34,979.51,979.68,979.85,980.02,980.19,980.36,980.53,980.69,980.86,981.03,981.2,981.37,981.54,981.71,981.88,982.05,982.22,982.39,982.55,982.72,982.89,983.06,983.23,983.4,983.57,983.74,983.91,984.07,984.24,984.41,984.58,984.75,984.92,985.09,985.26,985.42,985.59,985.76,985.93,986.1,986.27,986.44,986.6,986.77,986.94,987.11,987.28,987.45,987.62,987.78,987.95,988.12,988.29,988.46,988.63,988.79,988.96,989.13,989.3,989.47,989.64,989.8,989.97,990.14,990.31,990.48,990.64,990.81,990.98,991.15,991.32,991.48,991.65,991.82,991.99,992.16,992.32,992.49,992.66,992.83,993,993.16,993.33,993.5,993.67,993.83,994,994.17,994.34,994.51,994.67,994.84,995.01,995.18,995.34,995.51,995.68,995.85,996.01,996.18,996.35,996.52,996.68,996.85,997.02,997.19,997.35,997.52,997.69,997.86,998.02,998.19,998.36,998.52,998.69,998.86,999.03,999.19,999.36,999.53,999.69,999.86,1000.03,1000.2,1000.36,1000.53,1000.7,1000.86,1001.03,1001.2,1001.36,1001.53,1001.7,1001.87,1002.03,1002.2,1002.37,1002.53,1002.7,1002.87,1003.03,1003.2,1003.37,1003.53,1003.7,1003.87,1004.03,1004.2,1004.37,1004.53,1004.7,1004.87,1005.03,1005.2,1005.37,1005.53,1005.7,1005.87,1006.03,1006.2,1006.36,1006.53,1006.7,1006.86,1007.03,1007.2,1007.36,1007.53,1007.7,1007.86,1008.03,1008.19,1008.36,1008.53,1008.69,1008.86,1009.02,1009.19,1009.36,1009.52,1009.69,1009.85,1010.02,1010.19,1010.35,1010.52,1010.68,1010.85,1011.02,1011.18,1011.35,1011.51,1011.68,1011.85,1012.01,1012.18,1012.34,1012.51,1012.67,1012.84,1013.01,1013.17,1013.34,1013.5,1013.67,1013.83,1014,1014.16,1014.33,1014.5,1014.66,1014.83,1014.99,1015.16,1015.32,1015.49,1015.65,1015.82,1015.98,1016.15,1016.31,1016.48,1016.64,1016.81,1016.98,1017.14,1017.31,1017.47,1017.64,1017.8,1017.97,1018.13,1018.3,1018.46,1018.63,1018.79,1018.96,1019.12,1019.29,1019.45,1019.62,1019.78,1019.95,1020.11,1020.28,1020.44,1020.61,1020.77,1020.93,1021.1,1021.26,1021.43,1021.59,1021.76,1021.92,1022.09,1022.25,1022.42,1022.58,1022.75,1022.91,1023.07,1023.24,1023.4,1023.57,1023.73,1023.9,1024.06,1024.23,1024.39,1024.55,1024.72,1024.88,1025.05,1025.21,1025.38,1025.54,1025.7,1025.87,1026.03,1026.2,1026.36,1026.53,1026.69,1026.85,1027.02,1027.18,1027.35,1027.51,1027.67,1027.84,1028,1028.17,1028.33,1028.49,1028.66,1028.82,1028.99,1029.15,1029.31,1029.48,1029.64,1029.8,1029.97,1030.13,1030.3,1030.46,1030.62,1030.79,1030.95,1031.11,1031.28,1031.44,1031.6,1031.77,1031.93,1032.1,1032.26,1032.42,1032.59,1032.75,1032.91,1033.08,1033.24,1033.4,1033.57,1033.73,1033.89,1034.06,1034.22,1034.38,1034.55,1034.71,1034.87,1035.04,1035.2,1035.36,1035.52,1035.69,1035.85,1036.01,1036.18,1036.34,1036.5,1036.67,1036.83,1036.99,1037.15,1037.32,1037.48,1037.64,1037.81,1037.97,1038.13,1038.29,1038.46,1038.62,1038.78,1038.95,1039.11,1039.27,1039.43,1039.6,1039.76,1039.92,1040.08,1040.25,1040.41,1040.57,1040.73,1040.9,1041.06,1041.22,1041.38,1041.55,1041.71,1041.87,1042.03,1042.2,1042.36,1042.52,1042.68,1042.84,1043.01]

def main ():
    args = process_arguments ()
    labels = args.label [:len (args.data_set)] + [
        os.path.basename (a_data_set_filename)
        for a_data_set_filename in args.data_set [len (args.label):]
    ]
    list_figs_axes = []
    def new_figure (label):
        result_figure = matplotlib.pyplot.figure (figsize = (14, 9))
        result_axes = result_figure.add_subplot (111)
        list_figs_axes.append ((result_figure, result_axes, label))
        return result_axes
    compare_axes = new_figure ('compare')
    max_y = 0
    for a_label, a_data_set in zip (labels, args.data_set):
        single_axes = new_figure (a_label)
        d = classifier.dataset.DataSet (a_data_set, a_label)
        xs = []
        ys = []
        for row in d.rows:
            xs.extend (WAVE_LENGTHS)
            ys.extend (row)
        max_y = max ([max_y, max (ys)])
        pc = compare_axes.scatter (xs, ys, marker = '.', label = a_label, alpha = 0.25)
        single_axes.scatter (xs, ys, marker = '.', label = a_label, alpha = 0.25, c = pc.get_facecolor ())
        single_axes.set_title(a_label, fontsize = 24)
    for fig, axa, a_label in list_figs_axes:
        axa.legend ()
        axa.set_xlabel ('wave length (nm)')
        axa.set_ylabel ('intensity (a.u.)')
        axa.set_ylim (-52, max_y + 200)
        fig.show ()
        fig.savefig (a_label + '.png')
    print ('Press ENTER to finish')
    raw_input ('> ')

def process_arguments ():
    parser = argparse.ArgumentParser (
        description = 'Plot laser induced fluorescence curves from several data-sets.  Each data-set has a distinct name and label.  By default, the label is the filename.'
    )
    parser.add_argument (
        '--data-set', '-d',
        type = str,
        required = True,
        action = 'append',
        metavar = 'PATH',
        help = 'Text file containing LIF data.'
    )
    parser.add_argument (
        '--label', '-l',
        type = str,
        default = [],
        action = 'append',
        metavar = 'STRING',
        help = 'the n-th occurrence of this argument is used as a label for the n-th occurrence of the -d argument.'
    )
    return parser.parse_args ()

if __name__ == '__main__':
    main ()
